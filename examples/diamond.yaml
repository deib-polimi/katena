tosca_definitions_version: tosca_simple_yaml_1_3

imports:
- nodes/contract.yaml
- nodes/network.yaml

topology_template:
  node_templates:
    ganache:
      type: toscachain.nodes.network.ganache
    userWallet: 
      type: toscachain.nodes.network
      requirements:
      - host: ganache
      properties:
        privateKey: { get_input: UserKeyGanache }
        owner: { get_input: UserWallet}
    facet1:
      type: toscachain.nodes.diamond.facet
      requirements:
      - host: ganache
      - wallet: userWallet
      properties:
        abi: "Callee"
    # facet2:
    #   type: toscachain.nodes.diamond.facet
    #   requirements:
    #   - host: ganache
    #   properties:
    #     abi: "Callee"
    #     privateKey: { get_input: UserKeyGanache }
    diamondCut:
      type: toscachain.nodes.contract
      requirements:
      - host: ganache
      - wallet: userWallet
      properties:
        abi: "DiamondCutFacet"
    diamondLoupe:
      type: toscachain.nodes.contract
      requirements:
      - host: ganache
      - wallet: userWallet
      properties:
        abi: "DiamondLoupeFacet"
    myDiamond:
      type: toscachain.nodes.diamond
      requirements:
      - host: ganache
      - wallet: userWallet
      - cut: diamondCut
      - loupe: diamondLoupe
      - facet: facet1
      # - facet: facet2
      properties:
        abi: "Diamond"
        
  inputs:
    UserKeyGanache:
      type: string
      required: true
    UserWallet:
      type: string
      required: true