tosca_definitions_version: tosca_simple_yaml_1_3

imports:
  - contract.yaml

capability_types:
  tosca.capabilities.Callable:
    derived_from: tosca.capabilities.Container
    valid_source_types: [toscachain.nodes.contract]
    valid_target_types: [toscachain.nodes.contract]

relationship_types:
  toscachain.relationships.calls:
    derived_from: tosca.relationships.DependsOn
    valid_target_types: [tosca.capabilities.Callable]
    interfaces:
      Standard:
        type: tosca.interfaces.node.lifecycle.Standard
        operations:
          create:
            inputs:
              caller_address:
                { type: string, default: { get_property: [TARGET, address] } }
              caller_privateKey:
                {
                  type: string,
                  default: { get_property: [TARGET, privateKey] },
                }
              network:
                { type: string, default: { get_property: [TARGET, address] } }
              caller_abi:
                { type: string, default: { get_property: [TARGET, abi] } }
              callee_address:
                { type: string, default: { get_property: [HOST, address] } }
            implementation:
              primary: playbooks/set_address.yml
              dependencies:
                - scripts/
                - contracts/
